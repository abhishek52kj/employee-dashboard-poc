generator client {
provider = "prisma-client-js"
}
datasource db {
provider = "postgresql"
url      = env("DATABASE_URL")
}
model User {
id         String   @id @default(cuid())
email      String   @unique
password   String
role       UserRole @default(EMPLOYEE)
employeeId String?  @unique
employee   Employee? @relation("UserToEmployee", fields: [employeeId], references: [id])
createdAt  DateTime @default(now())
updatedAt  DateTime @updatedAt
activityLogs ActivityLog[]
}
model Employee {
id          String   @id @default(cuid())
avatar      String?
name        String
email       String   @unique
phone       String?
age         Int
department  Department
position    String
joinDate    DateTime
salary      Float?
status      EmployeeStatus @default(ACTIVE)
attendance  Float    @default(0)
role        UserRole @default(EMPLOYEE)
createdAt   DateTime @default(now())
updatedAt   DateTime @updatedAt
user        User?    @relation("UserToEmployee")
  leaveRequests LeaveRequest[]
}
enum Department {
HR
ENGINEERING
SALES
MARKETING
FINANCE
}
enum EmployeeStatus {
ACTIVE
ON_LEAVE
TERMINATED
}
enum UserRole {
  ADMIN
  EMPLOYEE
}

enum ActionType {
  CREATE
  UPDATE
  DELETE
}

model ActivityLog {
  id        String     @id @default(cuid())
  action    ActionType
  entity    String
  details   String
  userId    String
  user      User       @relation(fields: [userId], references: [id])
  createdAt DateTime   @default(now())
}

enum LeaveStatus {
  PENDING
  APPROVED
  REJECTED
}

model LeaveRequest {
  id        String      @id @default(cuid())
  startDate DateTime
  endDate   DateTime
  reason    String
  status    LeaveStatus @default(PENDING)
  employeeId String
  employee  Employee    @relation(fields: [employeeId], references: [id])
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
}
